---
- name: Resolve effective install directory
  ansible.builtin.set_fact:
    namedlock_effective_dir: >-
      {{
        namedlock_system_install_dir
        if install_scope | default('user') == 'system'
        else namedlock_install_dir
      }}

- name: Install namedlock binary
  ansible.builtin.include_tasks: install.yml

- name: Install test/lint dependencies
  ansible.builtin.include_tasks: deps.yml
  when: namedlock_install_test_deps | bool
